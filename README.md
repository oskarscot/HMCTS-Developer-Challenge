# HMCTS Task Management System

> [!WARNING]  
> This project is a part of the HMCTS Application process, it is not intended to be deployable!

A Spring Boot application that provides a RESTful API for managing caseworker tasks as a part of the HMCTS Developer Challenge. This app allows caseworkers to create, retrieve, update, and delete tasks efficiently.

## Technology Stack

- **Backend:** Spring Boot 3.2.x, Java 17
- **Database:** PostgreSQL
- **ORM:** Spring Data JPA
- **Migration:** Flyway
- **Documentation:** SpringDoc OpenAPI
- **Testing:** JUnit 5, Mockito
- **Build Tool:** Gradle

## Getting Started

### Prerequisites

- Java 17 or higher
- Maven 3.6 or higher
- PostgreSQL 12 or higher

### Database Setup

1. Create a PostgreSQL database:

```sql
CREATE DATABASE tasks_db;
```

2. Update database configuration in `src/main/resources/application.properties`

### Build and Run

Build and run using the scripts provided inside `build.gradle`

The application will start on `http://localhost:8080`

### Running Tests

```bash
gradle run test
```

### Code Coverage Report

Coverage reports will be generated in `target/site/jacoco`.

## API Documentation

Once the application is running, you can access the API documentation at:

- Swagger UI: `http://localhost:8080/swagger-ui.html`
- OpenAPI Specification: `http://localhost:8080/api-docs`

## API Endpoints

### Task Management

| HTTP Method | Endpoint             | Description                 |
|------------|----------------------|-----------------------------|
| POST       | /api/tasks           | Create a new task           |
| GET        | /api/tasks/{id}      | Retrieve a task by ID       |
| GET        | /api/tasks           | Retrieve all tasks          |
| PUT        | /api/tasks/{id}      | Update a task               |
| PATCH      | /api/tasks/{id}/status | Update task status        |
| DELETE     | /api/tasks/{id}      | Delete a task               |

## Task Structure

- **id**: Unique identifier for the task generated by the ORM
- **title**: Title of the task (required)
- **description**: Detailed description of the task (optional)
- **status**: Current status of the task (PENDING, IN_PROGRESS, COMPLETED, CANCELLED)
- **dueDate**: Date and time when the task is due
- **createdAt**: Date and time when the task was created
- **updatedAt**: Date and time when the task was last updated

## Request/Response Examples

### Create a Task

**Request**

```http
POST /api/tasks
Content-Type: application/json

{
  "title": "Review case #12345",
  "description": "Review the documents for case #12345",
  "status": "PENDING",
  "dueDate": "2025-04-30T17:00:00"
}
```

**Response**

```json
{
  "id": 1,
  "title": "Review case #12345",
  "description": "Review the documents for case #12345",
  "status": "PENDING",
  "dueDate": "2025-04-30T17:00:00",
  "createdAt": "2025-04-22T10:30:45",
  "updatedAt": "2025-04-22T10:30:45"
}
```

### Update Task Status

**Request**

```http
PATCH /api/tasks/1/status?status=IN_PROGRESS
```

**Response**

```json
{
  "id": 1,
  "title": "Review case #12345",
  "description": "Review the documents for case #12345",
  "status": "IN_PROGRESS",
  "dueDate": "2025-04-30T17:00:00",
  "createdAt": "2025-04-22T10:30:45",
  "updatedAt": "2025-04-22T10:45:12"
}
```

## Error Handling

The API returns appropriate HTTP status codes and error messages:

- **400 Bad Request**: Invalid input data
- **404 Not Found**: Resource not found
- **500 Internal Server Error**: Unexpected server error

Error responses follow this format:

```json
{
  "status": "NOT_FOUND",
  "timestamp": "2025-04-22T10:50:33",
  "message": "Task not found with id: 123",
  "debugMessage": null,
  "errors": []
}
```